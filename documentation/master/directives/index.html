<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="GraphQL Java RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="GraphQL Java Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-126627606-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">SDL directives | GraphQL Java</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://graphql-java.qubitpi.org//documentation/master/directives"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="SDL directives | GraphQL Java"><meta data-react-helmet="true" name="description" content="How SDL Directives can be used to adjust the behavior of your graphql API"><meta data-react-helmet="true" property="og:description" content="How SDL Directives can be used to adjust the behavior of your graphql API"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://graphql-java.qubitpi.org//documentation/master/directives"><link data-react-helmet="true" rel="alternate" href="https://graphql-java.qubitpi.org//documentation/master/directives" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://graphql-java.qubitpi.org//documentation/master/directives" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.e18100f3.css">
<link rel="preload" href="/assets/js/runtime~main.13fe404b.js" as="script">
<link rel="preload" href="/assets/js/main.b5cdfa09.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="GraphQL Java logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.png" alt="GraphQL Java logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">GraphQL Java</b></a><a class="navbar__item navbar__link navbar__link--active" href="/documentation/master/getting-started">Documentation</a><a href="https://leanpub.com/graphql-java/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Book</a><a class="navbar__item navbar__link" href="/tutorials/getting-started-with-spring-boot">Tutorial</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/security">Security</a><a class="navbar__item navbar__link" href="/about">About</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/documentation/master/getting-started">master</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/documentation/master/directives">master</a></li><li><a class="dropdown__link" href="/documentation/directives">v23</a></li></ul></div><a href="https://github.com/graphql-java/graphql-java" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/documentation/master/getting-started">Getting started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/documentation/master/batching">Batching</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/documentation/master/concerns">Concerns</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/documentation/master/contributions">Contributions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/documentation/master/data-fetching">Data fetching</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/documentation/master/data-mapping">Data mapping</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/documentation/master/directives">SDL directives</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/documentation/master/exceptions">Exceptions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/documentation/master/execution">Execution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/documentation/master/field-selection">Field selection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/documentation/master/field-visibility">Field visibility</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/documentation/master/instrumentation">Instrumentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/documentation/master/limits">Limits</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/documentation/master/query-parser">Query Parser</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/documentation/master/relay">Relay</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/documentation/master/scalars">Scalars</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/documentation/master/schema">Schema</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/documentation/master/subscriptions">Subscriptions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/documentation/master/upgrade-notes">Upgrade notes</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->GraphQL Java<!-- --> <b>master</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/documentation/directives">latest version</a></b> (<!-- -->v23<!-- -->).</div></div><div class="docItemContainer_oiyr"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->master</span><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Directives</h1></header><p><a href="https://spec.graphql.org/draft/#sec-Language.Directives" target="_blank" rel="noopener noreferrer">Directives</a> are a powerful feature of GraphQL, allowing you to declare additional data to a schema or document. This data can then be used to change runtime execution or type validation behavior.</p><p>There are two broad categories of directives, schema and operation directives. Schema directives are used on schema elements, and operation directives are used in operations within a GraphQL document.</p><p>Often, operation directives are also called &quot;query directives&quot;, although they can be used in any GraphQL operation. Whilst both names can be used interchangeably, note that GraphQL Java class names use &quot;query directives&quot;. </p><p>Note for those who love the details: the terminology of directives is a bit confusing. It is technically possible to define a directive that is both a schema and operation directive, in other words, defined for both schema and operation locations. However in practice, this is not common.</p><header><h1>Schema Directives</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="adding-behaviour">Adding Behaviour<a aria-hidden="true" class="hash-link" href="#adding-behaviour" title="Direct link to heading">â€‹</a></h2><p>Schema Definition Language (SDL) allows you to define your graphql types in a declarative manner without using code.  However you still need to wire in all the
logic that backs those types and their fields.</p><p>Schema directives allow you to do this.  You can place directives on SDL elements and then write the backing logic
once and have it apply in many places.</p><p>This idea of &quot;writing it once&quot; is the key concept here.  There is only code place where
logic needs to be written and it is then applied to all the places in the SDL that have a named directive.</p><p>This is a more powerful model than wiring in 10-100s of data fetchers like you might
with the conventional runtime wiring.</p><p>For example imagine you have a type like the following</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Employee</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">id</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> String</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">startDate</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> String</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">salary</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Float</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Publishing <code>salary</code> information to every one who can see this employee&#x27;s <code>name</code> might not be what you want.  Rather you want some sort of access control
to be in place such that if your role is that of a manager, you can see salaries, otherwise you get no data back.</p><p>Directives can help you declare this more easily.  Our declaration above would become something like the following:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">directive</span><span class="token plain"> </span><span class="token directive function" style="color:#d73a49">@auth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">role</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> String</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">FIELD_DEFINITION</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Employee</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">id</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> String</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">startDate</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> String</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">salary</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Float </span><span class="token directive function" style="color:#d73a49">@auth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">role</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;manager&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>So we have said that only people who have the role <code>manager</code> are authorised to see this field.  We can now use this directive on ANY field
that needs manager role authorisation.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">directive</span><span class="token plain"> </span><span class="token directive function" style="color:#d73a49">@auth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">role</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> String</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">FIELD_DEFINITION</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Employee</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">id</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> String</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">startDate</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> String</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">salary</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Float </span><span class="token directive function" style="color:#d73a49">@auth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">role</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;manager&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Department</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">id</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">yearlyOperatingBudget</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Float </span><span class="token directive function" style="color:#d73a49">@auth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">role</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;manager&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">monthlyMarketingBudget</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Float </span><span class="token directive function" style="color:#d73a49">@auth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">role</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;manager&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>We now need to wire in the code that can handle any field with this <code>@auth</code> directive.  We use <code>graphql.schema.idl.SchemaDirectiveWiring</code> to do this.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">class AuthorisationDirective implements SchemaDirectiveWiring {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public GraphQLFieldDefinition onField(SchemaDirectiveWiringEnvironment&lt;GraphQLFieldDefinition&gt; environment) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String targetAuthRole = (String) environment.getAppliedDirective().getArgument(&quot;role&quot;).getArgumentValue().getValue();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // build a data fetcher that first checks authorisation roles before then calling the original data fetcher</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DataFetcher originalDataFetcher = environment.getFieldDataFetcher();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DataFetcher authDataFetcher = new DataFetcher() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public Object get(DataFetchingEnvironment dataFetchingEnvironment) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                AuthorisationCtx authContext = dataFetchingEnvironment.getGraphQlContext().get(&quot;authContext&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (authContext.hasRole(targetAuthRole)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    return originalDataFetcher.get(dataFetchingEnvironment);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    return null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // now change the field definition to have the new authorising data fetcher</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return environment.setFieldDataFetcher(authDataFetcher);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// we wire this into the runtime by directive name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RuntimeWiring.newRuntimeWiring()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .directive(&quot;auth&quot;, new AuthorisationDirective())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This has modified the <code>GraphQLFieldDefinition</code> so that its original data fetcher will ONLY be called if the current authorisation context
has the <code>manager</code> role. You can use any mechanism for authorisation, for example Spring Security or anything else.</p><p>You would provide this authorisation checker into the execution &quot;context&quot; object of the graphql input, so it can then be accessed later in the
<code>DataFetchingEnvironment</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">AuthorisationCtx authCtx = AuthorisationCtx.obtain();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ExecutionInput executionInput = ExecutionInput.newExecutionInput()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .query(query)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .graphQLContext(builder -&gt; builder.put(&quot;authContext&quot;, authCtx))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="declaring-directives">Declaring Directives<a aria-hidden="true" class="hash-link" href="#declaring-directives" title="Direct link to heading">â€‹</a></h2><p>In order to use a directive in SDL, the graphql specification requires that you MUST declare its shape before using it. Our <code>@auth</code> directive example above needs to be
declared like so before use.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># This is a directive declaration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">directive</span><span class="token plain"> </span><span class="token directive function" style="color:#d73a49">@auth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">role</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> String</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">FIELD_DEFINITION</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Employee</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">id</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># and this is a usage of that declared directive</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">salary</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Float </span><span class="token directive function" style="color:#d73a49">@auth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">role</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;manager&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The one exception to this is the <code>@deprecated</code> directive which is implicitly declared for you as follows:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">directive</span><span class="token plain"> </span><span class="token directive function" style="color:#d73a49">@deprecated</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">reason</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> String </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;No longer supported&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">FIELD_DEFINITION</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">ENUM_VALUE</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The valid SDL directive locations are as follows:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token constant" style="color:#36acaa">SCHEMA</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">SCALAR</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">OBJECT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">FIELD_DEFINITION</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">ARGUMENT_DEFINITION</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">INTERFACE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">UNION</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">ENUM</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">ENUM_VALUE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">INPUT_OBJECT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">INPUT_FIELD_DEFINITION</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Directives are commonly applied to fields definitions but as you can see there are a number of places they can be applied.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="another-example---date-formatting">Another Example - Date Formatting<a aria-hidden="true" class="hash-link" href="#another-example---date-formatting" title="Direct link to heading">â€‹</a></h2><p>Date formatting is a cross-cutting concern that we should only have to write once and apply it in many areas.</p><p>The following demonstrates an example schema directive that can apply date formatting to fields that are <code>LocaleDate</code> objects.</p><p>What&#x27;s great in this example is that it adds an extra <code>format</code> argument to each field that it is applied to. So the clients can
opt into what ever date formatting you provide per request.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">directive</span><span class="token plain"> </span><span class="token directive function" style="color:#d73a49">@dateFormat</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">FIELD_DEFINITION</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Query</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">dateField</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> String </span><span class="token directive function" style="color:#d73a49">@dateFormat</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Then our runtime code could be :</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">public static class DateFormatting implements SchemaDirectiveWiring {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public GraphQLFieldDefinition onField(SchemaDirectiveWiringEnvironment&lt;GraphQLFieldDefinition&gt; environment) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        GraphQLFieldDefinition field = environment.getElement();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        GraphQLFieldsContainer parentType = environment.getFieldsContainer();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // DataFetcherFactories.wrapDataFetcher is a helper to wrap data fetchers so that CompletionStage is handled correctly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // along with POJOs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DataFetcher originalFetcher = environment.getCodeRegistry().getDataFetcher(parentType, field);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DataFetcher dataFetcher = DataFetcherFactories.wrapDataFetcher(originalFetcher, ((dataFetchingEnvironment, value) -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            DateTimeFormatter dateTimeFormatter = buildFormatter(dataFetchingEnvironment.getArgument(&quot;format&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (value instanceof LocalDateTime) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return dateTimeFormatter.format((LocalDateTime) value);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // This will extend the field by adding a new &quot;format&quot; argument to it for the date formatting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // which allows clients to opt into that as well as wrapping the base data fetcher so it</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // performs the formatting over top of the base values.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        FieldCoordinates coordinates = FieldCoordinates.coordinates(parentType, field);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        environment.getCodeRegistry().dataFetcher(coordinates, dataFetcher);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return field.transform(builder -&gt; builder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .argument(GraphQLArgument</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .newArgument()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .name(&quot;format&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .type(Scalars.GraphQLString)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .defaultValueProgrammatic(&quot;dd-MM-YYYY&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private DateTimeFormatter buildFormatter(String format) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String dtFormat = format != null ? format : &quot;dd-MM-YYYY&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return DateTimeFormatter.ofPattern(dtFormat);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">static GraphQLSchema buildSchema() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String sdlSpec = &quot;directive @dateFormat on FIELD_DEFINITION\n&quot; +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;type Query {\n&quot; +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;    dateField : String @dateFormat \n&quot; +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;}&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TypeDefinitionRegistry registry = new SchemaParser().parse(sdlSpec);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    RuntimeWiring runtimeWiring = RuntimeWiring.newRuntimeWiring()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .directive(&quot;dateFormat&quot;, new DateFormatting())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new SchemaGenerator().makeExecutableSchema(registry, runtimeWiring);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GraphQLSchema schema = buildSchema();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GraphQL graphql = GraphQL.newGraphQL(schema).build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Map&lt;String, Object&gt; root = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    root.put(&quot;dateField&quot;, LocalDateTime.of(1969, 10, 8, 0, 0));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    String query = &quot;&quot; +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;query {\n&quot; +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;    default : dateField \n&quot; +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;    usa : dateField(format : \&quot;MM-dd-YYYY\&quot;) \n&quot; +</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;}&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ExecutionInput executionInput = ExecutionInput.newExecutionInput()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .root(root)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .query(query)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ExecutionResult executionResult = graphql.execute(executionInput);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Map&lt;String, Object&gt; data = executionResult.getData();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // data[&#x27;default&#x27;] == &#x27;08-10-1969&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // data[&#x27;usa&#x27;] == &#x27;10-08-1969&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Notice the SDL definition did not have a <code>format</code> argument yet once the directive wiring is applied, it is added
to the field definition and hence clients can begin to use it.</p><p>Please note that graphql-java does not ship with this implementation. It is merely provided here as
an example of what you could add yourself.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="chaining-behaviour">Chaining Behaviour<a aria-hidden="true" class="hash-link" href="#chaining-behaviour" title="Direct link to heading">â€‹</a></h2><p>The directives are applied in the order they are encountered. For example imagine directives that changed the case of a field value.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">directive</span><span class="token plain"> </span><span class="token directive function" style="color:#d73a49">@uppercase</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">FIELD_DEFINITION</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">directive</span><span class="token plain"> </span><span class="token directive function" style="color:#d73a49">@lowercase</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">FIELD_DEFINITION</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">directive</span><span class="token plain"> </span><span class="token directive function" style="color:#d73a49">@mixedcase</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">FIELD_DEFINITION</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">directive</span><span class="token plain"> </span><span class="token directive function" style="color:#d73a49">@reversed</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">FIELD_DEFINITION</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Query</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">lowerCaseValue</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> String </span><span class="token directive function" style="color:#d73a49">@uppercase</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">upperCaseValue</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> String </span><span class="token directive function" style="color:#d73a49">@lowercase</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">mixedCaseValue</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> String </span><span class="token directive function" style="color:#d73a49">@mixedcase</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># directives are applied in order hence this will be lower, then upper, then mixed then reversed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token attr-name" style="color:#00a4db">allTogetherNow</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> String </span><span class="token directive function" style="color:#d73a49">@lowercase</span><span class="token plain"> </span><span class="token directive function" style="color:#d73a49">@uppercase</span><span class="token plain"> </span><span class="token directive function" style="color:#d73a49">@mixedcase</span><span class="token plain"> </span><span class="token directive function" style="color:#d73a49">@reversed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>When the above was executed each directive would be applied one on top of the other. Each directive implementation should be careful
to preserve the previous data fetcher to retain behaviour (unless of course you mean to throw it away)</p><header><h1>Operation Directives (also known as Query Directives)</h1></header><p>Let&#x27;s define an operation directive <code>@cache</code>, which can be used on operation fields. </p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Can only be used on a field in a GraphQL document</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">directive</span><span class="token plain"> </span><span class="token directive function" style="color:#d73a49">@cache</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">FIELD</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Query</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">pet</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Pet</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attr-name" style="color:#00a4db">lastTimeOutside</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> String</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>We can only use this <code>@cache</code> directive on fields in a GraphQL document, which contains operations.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">query</span><span class="token plain"> myPet </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pet </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lastTimeOutside </span><span class="token directive function" style="color:#d73a49">@cache</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Directives can also have arguments. Let&#x27;s add a <code>maxAge</code> argument, with a default value of 1000.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Argument with a default value</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">directive</span><span class="token plain"> </span><span class="token directive function" style="color:#d73a49">@cache</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">maxAge</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Int </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">FIELD</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>In a GraphQL document, we could use our updated <code>@cache</code> directive to specify a maxAge value:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">query</span><span class="token plain"> myPet </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pet </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lastTimeOutside </span><span class="token directive function" style="color:#d73a49">@cache</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">maxAge</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">500</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>All custom schema and operation directives don&#x27;t have any effect until we implement new custom behavior. For example, the operation above where <code>lastTimeOutside</code> has a <code>@cache</code> directive behaves exactly the same as without it, until we have implemented some new logic. We&#x27;ll demonstrate implementation of behavior for directives in the next section of this page.</p><p>Here is an operation directive with all possible eight locations in a GraphQL document, which contains operations.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token directive function" style="color:#d73a49">@foo</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">QUERY</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">MUTATION</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">SUBSCRIPTION</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token constant" style="color:#36acaa">FIELD</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">FRAGMENT_DEFINITION</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">FRAGMENT_SPREAD</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token constant" style="color:#36acaa">INLINE_FRAGMENT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">VARIABLE_DEFINITION</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">query</span><span class="token plain"> someQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token variable" style="color:#36acaa">$var</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> String </span><span class="token directive function" style="color:#d73a49">@foo</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Variable definition</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token directive function" style="color:#d73a49">@foo</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Query</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        field </span><span class="token directive function" style="color:#d73a49">@foo</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Field</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">Query</span><span class="token plain"> </span><span class="token directive function" style="color:#d73a49">@foo</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Inline fragment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            field</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">...</span><span class="token fragment function" style="color:#d73a49">someFragment</span><span class="token plain"> </span><span class="token directive function" style="color:#d73a49">@foo</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Fragment spread</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">fragment</span><span class="token plain"> </span><span class="token fragment function" style="color:#d73a49">someFragment</span><span class="token plain"> </span><span class="token directive function" style="color:#d73a49">@foo</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Fragment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    field</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">mutation</span><span class="token plain"> someMutation </span><span class="token directive function" style="color:#d73a49">@foo</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Mutation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    field</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">subscription</span><span class="token plain"> someSubscription </span><span class="token directive function" style="color:#d73a49">@foo</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Subscription</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    field</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Although it is technically possible to define a directive that includes locations associated with schema and operation directives, in practice this is not common.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="implementing-logic-for-operation-directives">Implementing logic for operation directives<a aria-hidden="true" class="hash-link" href="#implementing-logic-for-operation-directives" title="Direct link to heading">â€‹</a></h2><p>Let&#x27;s implement the logic for a <code>@cache</code> operation directive:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">directive</span><span class="token plain"> </span><span class="token directive function" style="color:#d73a49">@cache</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">maxAge</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> </span><span class="token class-name">FIELD</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This is an operation directive that enables clients to specify how recent cache entries must be. This is an example of an operation directive that can change execution.</p><p>For example, a client specifies that <code>hello</code> cache entries must not be older than 500 ms, otherwise we re-fetch these entries.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">query</span><span class="token plain"> caching </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hello </span><span class="token directive function" style="color:#d73a49">@cache</span><span class="token punctuation" style="color:#393A34">(</span><span class="token attr-name" style="color:#00a4db">maxAge</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">500</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>In GraphQL Java, operation directive definitions are represented as <code>GraphQLDirective</code>s. Operation directive usages are represented as <code>QueryAppliedDirective</code>s. Note that the word &quot;query&quot; here is misleading, as it actually refers to a directive that applies to any of the three GraphQL operations: queries, mutations, or subscriptions. Operation directives are still commonly referred to as &quot;query&quot; directives, hence the class name.</p><p>Usages of operation directives are represented in GraphQL Java as instances of <code>QueryAppliedDirective</code>, and provided argument values are represented as <code>QueryAppliedDirectiveArgument</code>.</p><p>We can access operation directives usage during execution via <code>getQueryDirectives()</code> in <code>DataFetchingEnvironment</code>. For example:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">DataFetcher&lt;?&gt; cacheDataFetcher = new DataFetcher&lt;Object&gt;() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Object get(DataFetchingEnvironment env) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        QueryDirectives queryDirectives = env.getQueryDirectives();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;QueryAppliedDirective&gt; cacheDirectives = queryDirectives</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .getImmediateAppliedDirective(&quot;cache&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // We get a List, because we could have</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // repeatable directives</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (cacheDirectives.size() &gt; 0) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            QueryAppliedDirective cache = cacheDirectives.get(0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            QueryAppliedDirectiveArgument maxAgeArgument</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    = cache.getArgument(&quot;maxAge&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            int maxAge = maxAgeArgument.getValue();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Now we know the max allowed cache time and</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // can make use of it</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Your logic goes here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/graphql-java/graphql-java-page/edit/master/documentation/directives.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/documentation/master/data-mapping"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Data mapping</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/documentation/master/exceptions"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Exceptions<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#adding-behaviour" class="table-of-contents__link toc-highlight">Adding Behaviour</a></li><li><a href="#declaring-directives" class="table-of-contents__link toc-highlight">Declaring Directives</a></li><li><a href="#another-example---date-formatting" class="table-of-contents__link toc-highlight">Another Example - Date Formatting</a></li><li><a href="#chaining-behaviour" class="table-of-contents__link toc-highlight">Chaining Behaviour</a></li><li><a href="#implementing-logic-for-operation-directives" class="table-of-contents__link toc-highlight">Implementing logic for operation directives</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/documentation/getting-started">Documentation</a></li><li class="footer__item"><a class="footer__link-item" href="/tutorials/getting-started-with-spring-boot">3 Min Tutorial</a></li><li class="footer__item"><a href="https://javadoc.io/doc/com.graphql-java/graphql-java/" target="_blank" rel="noopener noreferrer" class="footer__link-item">JavaDoc</a></li><li class="footer__item"><a class="footer__link-item" href="/security">Security</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/graphql-java/graphql-java/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/graphql-java/graphql-java" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 Andreas Marek.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.13fe404b.js"></script>
<script src="/assets/js/main.b5cdfa09.js"></script>
</body>
</html>